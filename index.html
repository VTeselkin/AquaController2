<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Aquacontroller2 by VTeselkin</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/VTeselkin/AquaController2">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/VTeselkin/AquaController2/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/VTeselkin/AquaController2/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Aquacontroller2</h1>
          <p></p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/VTeselkin">VTeselkin</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h1>
<a id="документация" class="anchor" href="#%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D1%8F" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Документация</h1>
<p><img src="https://github.com/VTeselkin/AquaController2/blob/master/docs/Top.jpg?raw=false" alt="Screenshot_3.png"></p>
<h1>
<a id="описание-устройства" class="anchor" href="#%D0%BE%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Описание устройства</h1>
<p>Контроллер предназначен для автоматизированного управления электрооборудованием. Содержит восемь каналов для подключения нагрузок, до 6А на канал, которые могут управляться как в ручном режиме, так и в автоматическом режиме используя таймеры. А так же содержит до 10 шим каналов для управление внешними LED драйверами. Имеет гибкую систему настройки. Любой выход контроллера можно подключить к любому таймеру или температурному датчику. Также можно запрограммировать на один выход несколько таймеров.</p>
<hr>
<ul>
<li>Часы. Индикация даты и времени.</li>
<li>Управление аквариумными нагрузками: 8 каналов.</li>
<li>Управление 10 ШИМ каналами</li>
<li>До 10 ежедневных программ таймера.</li>
<li>До 10 ежечасных программ таймера. С диапазоном длительности работы до 60 минут.</li>
<li>До 10 секундных разовых таймеров. С диапазоном длительности работы от 1 до 250 секунд.</li>
<li>Поддержка до 4 цифровых датчиков температуры на 3-х проводной шине.</li>
<li>Поддержка электродов рН и управление клапаном СО2. Точность измерения pH +/- 0,02.</li>
<li>Измерение температуры в пределах -25…+85 градусов. Точность измерения 0,5°C. Возможность управления нагрузкой (обогревателем/охладителем) на любом из 8 каналов выхода.</li>
<li>Аккумулятор для работы часов микроконтроллера. Сохранение хода часов.</li>
<li>Автоматическое сохранение в энергонезависимой памяти всех настроек при полном отключении питания и разряде аккумулятора.</li>
<li>Связь со смартфоном на ОС Android по Wi-Fi. Дополнительное программное обеспечение для быстрого программирования таймеров, термостата, синхронизации времени.</li>
<li>Удаленное управление устройством по средствам Wi-Fi в локальной сети (либо сети Internet при определенной настройка сетевого оборудования).</li>
<li>Самостоятельная синхронизация и корректировка даты и времени устройства при наличии доступа устройству в сеть Internet. Либо удаленная синхронизация через смартфон.</li>
<li>Функция слежения за отклонением показаний датчиков от среднего установленного значения со звуковым оповещением и индикацией аварийного датчика.</li>
<li>Функция слежения за отклонением показаний датчиков от среднего установленного значения со звуковым оповещением и индикацией аварийного датчика.</li>
<li>Временное отключение нагрузки на произвольном канале на 5-30 минут.</li>
<li>
</ul>
<h1>
<a id="эксплуатация-устройства" class="anchor" href="#%D1%8D%D0%BA%D1%81%D0%BF%D0%BB%D1%83%D0%B0%D1%82%D0%B0%D1%86%D0%B8%D1%8F-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Эксплуатация устройства</h1>
<p>Устройство питается от сети переменного тока 220V. Проводить любые манипуляции с подключением, отключением нагрузок или датчиков только с выключенным из сети устройством чтобы исключить возможность поражения электрическим током или выхода из строя устройства! Так как устройство используется для управления высоковольтными нагрузками, необходимо обеспечить безопасную установку устройства при которой будет невозможно попадание воды на устройство или внутрь него.
Контроллер оснащен часами реального времени, которые имеют свой собственный, внутренний элемент питания литиевая батарея CR2032 3.3V. При падении напряжения на батарее менее чем 2.5V контроллер не сможет сохранять время при отключении питания. Со временем может понадобится замена батареи.</p>
<h1>
<a id="протокол-передачи-данных" class="anchor" href="#%D0%BF%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB-%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%B0%D1%87%D0%B8-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Протокол передачи данных</h1>
<p>Для связи с устройством используется встроенный модуль связи по технологии WiFi. Для обмена данных используется порт <strong>8888</strong> и сетевой протокол передачи данных <strong>UDP</strong>. Для обменом информации между устройством и клиентом пользователя используется внутренний протокол устройства основанный на JSON:
Устройство связи принимает команды трех типов: <strong>GET</strong>, <strong>POST</strong>, <strong>INFO</strong>:
Команды типа GET позволяют делать запрос на получения данных от устройства.
<strong>Синтаксис команд:</strong> все команды отправляются только в строчном виде. В устройстве присутствует внутренний валидатор запросов, однако проверки на валидность параметров не предусмотрено, и вся валидация параметров должна происходить на стороне клиента, поэтому при разработке необходимо учитывать этот момент. Так как использование не валидных параметров может вызвать неоднозначную работу устройства.</p>
<h2>
<a id="формат-команд-get" class="anchor" href="#%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4-get" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Формат команд GET:</strong>
</h2>
<pre><code>{
"status":"get",
"message":"device"
}
</code></pre>
<p><strong>status</strong> - тип отправляемой команды: GET, POST, INFO</p>
<p><strong>message</strong> - команда устройству:</p>
<ul>
<li>dev - информация об устройстве.</li>
<li>c_s - информация об состоянии каналов устройства</li>
<li>td_s - информация о ежедневных таймерах устройства</li>
<li>th_s - информация о ежечасных таймерах устройства</li>
<li>ts_s - информация о секундных таймерах устройства</li>
<li>te_s - информация о температурных настройках устройства</li>
<li>t_sen - информация о температурных датчиках устройства</li>
</ul>
<p><strong>data</strong> - дополнительный параметр для передачи параметров запроса, в запросе типа GET не используется.</p>
<p>На каждый запрос GET устройство шлет ответ в виде своего внутреннего JSON. Такие запросы и примеры таких ответов представлены ниже:</p>
<h3>
<a id="информация-об-устройстве" class="anchor" href="#%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F-%D0%BE%D0%B1-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B5" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Информация об устройстве:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос:</strong></p>
<pre><code>{
	"status": "get",
	"message": "dev"
}
</code></pre>
</li>
<li>
<p><strong>Ответ:</strong></p>
<pre><code>{
    "status":"success",
    "message":"dev",
    "data":{
        "ver":"AQ_V2_ESP32",
        "firm":"200.bin",  
        "update":0,
        "ip":"192.168.1.58",
        "m_t":10,
        "m_t_se":4,
        "min_t":1600,
        "max_t":3500,
        "time":"00:55:03"
        }
}
</code></pre>
</li>
<li>
<p><em>"ver": "AQ_CH08W" - версия устройства</em></p>
</li>
<li>
<p><em>"m_t": 8 - максимальное количество таймеров (ежедневных, ежечасных, секундных)</em></p>
</li>
<li>
<p><em>"m_t_se": 4 - максимально возможное количество подключенных температурных датчиков</em></p>
</li>
<li>
<p><em>"min_t": 1600 - порог минимальной температуры</em></p>
</li>
<li>
<p><em>"max_t": 3500 - порог максимальной температуры</em></p>
</li>
</ul>
<h3>
<a id="информация-об-состоянии-каналов-устройства" class="anchor" href="#%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F-%D0%BE%D0%B1-%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B8-%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB%D0%BE%D0%B2-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Информация об состоянии каналов устройства:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос:</strong></p>
<pre><code>{
	"status": "get",
	"message": "c_s"
}
</code></pre>
</li>
<li>
<p><strong>Ответ:</strong></p>
<pre><code>{
    "status": "success",
    "message": "c_s",
    "data": {
        "cl": [2, 1, 1, 1, 1, 1, 1, 1],
        "c_t": [2, 3, 3, 3, 3, 3, 3, 3]
    }
}
</code></pre>
</li>
<li>
<p><em>"cl": [2, 2, 1, 1, 1, 1, 1, 1] - состояние канала (1 - off, 2 - on, 3-daily, 4-hour, 5-sec, 6-temp)</em></p>
</li>
<li>
<p><em>"c_t": [3, 2, 1, 1, 1, 1, 1, 1] - настройки канала (1 - off, 2 - on, 3 - auto)</em></p>
</li>
</ul>
<h3>
<a id="информация-о-ежедневных-таймерах-устройства" class="anchor" href="#%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F-%D0%BE-%D0%B5%D0%B6%D0%B5%D0%B4%D0%BD%D0%B5%D0%B2%D0%BD%D1%8B%D1%85-%D1%82%D0%B0%D0%B9%D0%BC%D0%B5%D1%80%D0%B0%D1%85-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Информация о ежедневных таймерах устройства:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос:</strong></p>
<pre><code>{
	"status": "get",
	"message": "td_s"
}
</code></pre>
</li>
<li>
<p><strong>Ответ:</strong></p>
<pre><code>{
    "status": "success",
    "message": "td_s",
    "data": {
        "dt_h_s": [0, 12, 12, 0, 0, 0, 0, 0, 0, 0],
        "dt_h_end": [0, 20, 21, 0, 0, 0, 0, 0, 0, 0],
        "dt_m_s": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        "dt_m_e": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        "dt_s": [0, 1, 1, 0, 0, 0, 0, 0, 0, 0],
        "dt_c": [0, 1, 2, 0, 0, 0, 0, 0, 0, 0]
    }
}
</code></pre>
</li>
<li>
<p><em>"dt_h_s": [0, 0, 0, 0, 0, 0, 0, 0] - час включения таймера (0...23)</em></p>
</li>
<li>
<p><em>"dt_h_end": [0, 0, 0, 0, 0, 0, 0, 0] - час выключения таймера (0...23)</em></p>
</li>
<li>
<p><em>"dt_m_s": [0, 0, 0, 0, 0, 0, 0, 0] - минута включения таймера (0...59)</em></p>
</li>
<li>
<p><em>"dt_m_e": [0, 0, 0, 0, 0, 0, 0, 0] - минута выключения таймера (0...59)</em></p>
</li>
<li>
<p><em>"dt_s": [0, 0, 0, 0, 0, 0, 0, 0] - состояние таймера (0 - off, 1 - on)</em></p>
</li>
<li>
<p><em>"dt_c": [0, 0, 0, 0, 0, 0, 0, 0] - канал управляемый таймером (0...max_canal)</em></p>
</li>
</ul>
<h3>
<a id="информация-о-ежечасных-таймерах-устройства" class="anchor" href="#%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F-%D0%BE-%D0%B5%D0%B6%D0%B5%D1%87%D0%B0%D1%81%D0%BD%D1%8B%D1%85-%D1%82%D0%B0%D0%B9%D0%BC%D0%B5%D1%80%D0%B0%D1%85-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Информация о ежечасных таймерах устройства:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос:</strong></p>
<pre><code>{
	"status": "get",
	"message": "th_s"
}
</code></pre>
</li>
<li>
<p><strong>Ответ:</strong></p>
<pre><code>{
    "status": "success",
    "message": "th_s",
    "data": {
        "ht_m_st": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        "ht_m_sp": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        "ht_s": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        "ht_c": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}
</code></pre>
</li>
<li>
<p><em>"ht_m_st": [0, 0, 0, 0, 0, 0, 0, 0] - минута включения таймера (0...59)</em></p>
</li>
<li>
<p><em>"ht_m_sp": [0, 0, 0, 0, 0, 0, 0, 0] - минута выключения таймера (0...59)</em></p>
</li>
<li>
<p><em>"ht_s": [0, 0, 0, 0, 0, 0, 0, 0] - состояние таймера (0 - off, 1 - on)</em></p>
</li>
<li>
<p><em>"ht_c": [0, 0, 0, 0, 0, 0, 0, 0] - канал управляемый таймером (0...max_canal)</em></p>
</li>
</ul>
<h3>
<a id="информация-о-секундных-таймерах-устройства" class="anchor" href="#%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F-%D0%BE-%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%D0%BD%D1%8B%D1%85-%D1%82%D0%B0%D0%B9%D0%BC%D0%B5%D1%80%D0%B0%D1%85-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Информация о секундных таймерах устройства:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос:</strong></p>
<pre><code>{
	"status": "get",
	"message": "ts_s"
}
</code></pre>
</li>
<li>
<p><strong>Ответ:</strong></p>
<pre><code>{
    "status": "success",
    "message": "ts_s",
    "data": {
        "st_h_s": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        "st_m_s": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        "st_d": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        "st_s": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        "st_c": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}
</code></pre>
</li>
<li>
<p><em>"st_h_s: [0, 0, 0, 0, 0, 0, 0, 0] - час включения таймера (0...23)</em></p>
</li>
<li>
<p><em>"st_m_s": [0, 0, 0, 0, 0, 0, 0, 0] - минута включения таймера (0...59)</em></p>
</li>
<li>
<p><em>"st_d": [0, 0, 0, 0, 0, 0, 0, 0] - длительность работы таймера в секундах (0...255)</em></p>
</li>
<li>
<p><em>"st_s": [0, 0, 0, 0, 0, 0, 0, 0] - состояние таймера (0 - off, 1 - on)</em></p>
</li>
<li>
<p><em>"st_c": [0, 0, 0, 0, 0, 0, 0, 0] - канал управляемый таймером (0...max_canal)</em></p>
</li>
</ul>
<h3>
<a id="информация-о-температурных-настройках-устройства" class="anchor" href="#%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F-%D0%BE-%D1%82%D0%B5%D0%BC%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D1%83%D1%80%D0%BD%D1%8B%D1%85-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%D1%85-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Информация о температурных настройках устройства:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос:</strong></p>
</li>
<li>
<pre><code>  {
  	"status": "get",
  	"message": "te_s"
  }
</code></pre>
</li>
<li>
<p><strong>Ответ:</strong></p>
</li>
<li>
<pre><code>  {
      "status": "success",
      "message": "te_s",
      "data": {
          "tt_s": [0, 0, 0, 0],
          "tt_m_s": [0, 0, 0, 0],
          "tt_m_e": [76, 76, 76, 76],
          "tt_c": [1, 0, 0, 0]
      }
  }
</code></pre>
</li>
<li>
<p><em>"tt_s": [1, 0, 0, 0,] - состояние температурного таймера</em></p>
</li>
<li>
<p><em>"tt_m_s": [0, 0, 0, 0] - температура включения канала (min_temp...max_temp, кратна 50)</em></p>
</li>
<li>
<p><em>"tt_m_e": [76, 76, 0, 0] - температура выключения канала (min_temp...max_temp кратна 50)</em></p>
</li>
<li>
<p><em>"tt_c": [1, 0, 0, 0] - канала управляемый таймером (0...max_canal)</em></p>
</li>
</ul>
<h3>
<a id="информация-о-температурных-датчиках-устройства" class="anchor" href="#%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F-%D0%BE-%D1%82%D0%B5%D0%BC%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D1%83%D1%80%D0%BD%D1%8B%D1%85-%D0%B4%D0%B0%D1%82%D1%87%D0%B8%D0%BA%D0%B0%D1%85-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Информация о температурных датчиках устройства:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос:</strong></p>
</li>
<li>
<pre><code>  {
  	"status": "get",
  	"message": "t_se"
  }
</code></pre>
<p><strong>Ответ:</strong></p>
<pre><code>  {
      "status": "success",
      "message": "t_sen",
      "data": {
          "t_se": [4, 3, 0, 0]
      }
  }
</code></pre>
</li>
<li>
<p><em>"t_se": [4, 3, 0, 0] - температура датчиков (min_temp...max_temp)</em></p>
</li>
</ul>
<h2>
<a id="формат-команд-post" class="anchor" href="#%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4-post" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Формат команд POST</strong>
</h2>
<p>Команды POST отличаются от команд GET только тем что в запросе необходимо в поле <strong>data</strong> указывать параметры запроса и поле <strong>status</strong> содержит параметр <strong>post</strong>. Формат данных для поля <strong>data</strong> аналогичен данным приходящим от устройства при запросе командой GET.</p>
<p><strong>Примеры возможных запросов:</strong></p>
<h3>
<a id="изменение-состояния-каналов-устройства" class="anchor" href="#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F-%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB%D0%BE%D0%B2-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Изменение состояния каналов устройства:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос:</strong></p>
<p>{
"status": "post",
"message": "c_s",
"data": {
"c_t": [1, 0, 0, 0, 0, 0, 0, 0]
}
}</p>
</li>
</ul>
<p>Обратите внимание для изменения настроек каналов, отправлять нужно только параметр <strong>c_t</strong>, параметр <strong>cl</strong> не предназначен для изменения, он отвечает только за текущее состояние канала в зависимости от настроек таймеров или ручных настроек.</p>
<h3>
<a id="изменение-ежедневных-таймеров-устройства" class="anchor" href="#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B5%D0%B6%D0%B5%D0%B4%D0%BD%D0%B5%D0%B2%D0%BD%D1%8B%D1%85-%D1%82%D0%B0%D0%B9%D0%BC%D0%B5%D1%80%D0%BE%D0%B2-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Изменение ежедневных таймеров устройства:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос:</strong></p>
<p>{
"status": "post",
"message": "td_s",
"data": {
"dt_h_s": [1, 0, 0, 0, 0, 0, 0, 0],
"dt_h_end": [2, 0, 0, 0, 0, 0, 0, 0],
"dt_m_s": [5, 0, 0, 0, 0, 0, 0, 0],
"dt_m_e": [55, 0, 0, 0, 0, 0, 0, 0],
"dt_s": [1, 0, 0, 0, 0, 0, 0, 0],
"dt_c": [3, 0, 0, 0, 0, 0, 0, 0]
}
}</p>
</li>
</ul>
<h3>
<a id="изменение-ежечасных-таймеров-устройства" class="anchor" href="#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B5%D0%B6%D0%B5%D1%87%D0%B0%D1%81%D0%BD%D1%8B%D1%85-%D1%82%D0%B0%D0%B9%D0%BC%D0%B5%D1%80%D0%BE%D0%B2-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Изменение ежечасных таймеров устройства:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос:</strong></p>
<p>{
"status": "post",
"message": "th_s",
"data": {
"ht_m_st": [45, 0, 0, 0, 0, 0, 0, 0],
"ht_m_sp": [56, 0, 0, 0, 0, 0, 0, 0],
"ht_s": [1, 0, 0, 0, 0, 0, 0, 0],
"ht_c": [3, 0, 0, 0, 0, 0, 0, 0]
}
}</p>
</li>
</ul>
<h3>
<a id="изменение-секундных-таймеров-устройства" class="anchor" href="#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%D0%BD%D1%8B%D1%85-%D1%82%D0%B0%D0%B9%D0%BC%D0%B5%D1%80%D0%BE%D0%B2-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Изменение секундных таймеров устройства:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос:</strong></p>
<p>{
"status": "post",
"message": "ts_s",
"data": {
"st_h_s": [5, 0, 0, 0, 0, 0, 0, 0],
"st_m_s": [26, 0, 0, 0, 0, 0, 0, 0],
"st_d": [125, 0, 0, 0, 0, 0, 0, 0],
"st_s": [1, 0, 0, 0, 0, 0, 0, 0],
"st_c": [2, 0, 0, 0, 0, 0, 0, 0]
}
}</p>
</li>
</ul>
<h3>
<a id="изменение-температурных-настроек-устройства" class="anchor" href="#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D1%82%D0%B5%D0%BC%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D1%83%D1%80%D0%BD%D1%8B%D1%85-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Изменение температурных настроек устройства:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос:</strong></p>
<p>{
"status": "post",
"message": "te_s",
"data": {
"tt_s": [0, 0, 0, 0, 0, 0, 0, 0],
"tt_m_s": [2200, 2250, 0, 0, 0, 0, 0, 0],
"tt_m_e": [2700, 2850, 0, 0, 0, 0, 0, 0],
"tt_c": [5, 0, 0, 0, 0, 0, 0, 0]
}
}</p>
</li>
</ul>
<p>При POST запросе нет необходимости указывать все параметры в поле <strong>data</strong>. При передаче значений в устройство можно отправлять только те данные которые изменились на клиенте. На каждый выполненный <strong>POST</strong> запрос, ответом будет ответ аналогичный <strong>GET</strong> с тем же <strong>message</strong> параметром, но уже с измененными данными.</p>
<h3>
<a id="пример" class="anchor" href="#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Пример:</strong>
</h3>
<ul>
<li>
<p><strong>Запрос</strong></p>
</li>
<li>
<pre><code>  {
  	"status": "post",
  	"message": "c_s",
  	"data": {
  		"c_t": [1, 1, 1, 2, 3, 2, 2, 2]
  	}
  }
</code></pre>
</li>
<li>
<p><strong>Ответ</strong></p>
</li>
<li>
<pre><code>  {
  	"status": "get",
  	"message": "c_s",
  	"data": {
  		"cl": [1, 1, 1, 2, 1, 2, 2, 2],
  		"c_t": [1, 1, 1, 2, 3, 2, 2, 2]
  	}
  }
</code></pre>
</li>
<li>
<p>Обратите внимание что ответ на POST приходит всегда в полном виде независимо от тех параметров которые вы отправляете.</p>
</li>
</ul>
<h2>
<a id="формат-команд-info" class="anchor" href="#%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4-info" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Формат команд INFO:</strong>
</h2>
<p>В данный момент запросы формата INFO используются только для внутренней передачи данных между Arduino и модулем связи ESP8266. В частности используется ESP8266 для передачи своего состояния и логирования процессов. Использование внешними клиентами в данной версии не предусмотрено.</p>
<h3>
<a id="пример-отправки-логов-wifi-соединения-на-устройство" class="anchor" href="#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BE%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B8-%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2-wifi-%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BD%D0%B0-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Пример отправки логов WIFI соединения на устройство:</strong>
</h3>
<pre><code>{
	"status": "info",
	"message": "wifi_log",
	"log": ""
} 
</code></pre>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
